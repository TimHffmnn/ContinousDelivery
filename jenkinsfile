// @Library('piper-lib-os') _

final def jenkinsLibVersion = 'conditionUpdate'

pipeline {

    agent any

    stages {
        stage("prepare") {
            steps {
                deleteDir()
                checkout scm
                library "piper-lib-os@${jenkinsLibVersion}"
                setupCommonPipelineEnvironment script: this
            }
        }
        stage('build') {
            steps {
                withEnv(["REPOSITORY_UNDER_TEST=SAP/jenkins-library", "LIBRARY_VERSION_UNDER_TEST=conditionUpdate"]){
                    mtaBuild script: this, mtaBuildTool: 'cloudMbt', dockerOptions: ['--network=cx-network']
                }
            }
        }
    }
}
